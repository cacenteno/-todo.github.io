{"ast":null,"code":"import _regeneratorRuntime from\"/root/todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/root/todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import axios from'axios';import React from'react';function Login(props){var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var elements,user,_yield$axios$post,data,todos;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;e.preventDefault();elements=e.target.elements;user={email:elements.email.value,password:elements.pwd.value};_context.next=6;return axios.post(\"http://192.168.1.138:3000/api/login\",user,{headers:{\"Content-Type\":\"application/json\"}});case 6:_yield$axios$post=_context.sent;data=_yield$axios$post.data;_context.next=10;return axios.get(\"http://192.168.1.138:3000/api/todos\",{headers:{\"Content-Type\":\"application/json\",\"secret-token\":data.token}});case 10:todos=_context.sent;props.saveToken(data.token);props.setTodos(todos.data.todos);props.history.push(\"/profile\");_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](0);throw _context.t0;case 19:case\"end\":return _context.stop();}}},_callee,null,[[0,16]]);}));return function handleLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"form\",{onSubmit:handleLogin,children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-5 mx-auto py-5 px-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-3\",children:\"Log In\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",className:\"form-control mb-3\",placeholder:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"pwd\",className:\"form-control mb-3\",placeholder:\"Password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto px-4\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btl-lg btn-info\",children:\"Log In\"})})]})});}export default Login;","map":{"version":3,"sources":["/root/todo/src/views/Login/index.js"],"names":["axios","React","Login","props","handleLogin","e","preventDefault","elements","target","user","email","value","password","pwd","post","headers","data","get","token","todos","saveToken","setTodos","history","push"],"mappings":"uVAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,QAASC,CAAAA,KAAT,CAAeC,KAAf,CAAsB,CAClB,GAAMC,CAAAA,WAAW,0FAAG,iBAAOC,CAAP,iLAEhBA,CAAC,CAACC,cAAF,GACIC,QAHY,CAGDF,CAAC,CAACG,MAAF,CAASD,QAHR,CAIZE,IAJY,CAIN,CACNC,KAAK,CAACH,QAAQ,CAACG,KAAT,CAAeC,KADf,CAENC,QAAQ,CAAEL,QAAQ,CAACM,GAAT,CAAaF,KAFjB,CAJM,uBAQKX,CAAAA,KAAK,CAACc,IAAN,CAAW,qCAAX,CAAkDL,IAAlD,CAAuD,CAACM,OAAO,CAAC,CACjF,eAAgB,kBADiE,CAAT,CAAvD,CARL,wCAQTC,IARS,mBAQTA,IARS,wBAWIhB,CAAAA,KAAK,CAACiB,GAAN,CAAU,qCAAV,CAAgD,CAACF,OAAO,CAAC,CACzE,eAAgB,kBADyD,CAEzE,eAAgBC,IAAI,CAACE,KAFoD,CAAT,CAAhD,CAXJ,SAWVC,KAXU,eAejBhB,KAAK,CAACiB,SAAN,CAAgBJ,IAAI,CAACE,KAArB,EACAf,KAAK,CAACkB,QAAN,CAAeF,KAAK,CAACH,IAAN,CAAWG,KAA1B,EACAhB,KAAK,CAACmB,OAAN,CAAcC,IAAd,CAAmB,UAAnB,EAjBiB,wKAAH,kBAAXnB,CAAAA,WAAW,4CAAjB,CAuBA,mBACG,aAAM,QAAQ,CAAEA,WAAhB,uBACI,aAAK,SAAS,CAAC,4BAAf,wBACI,WAAI,SAAS,CAAC,kBAAd,oBADJ,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,OAAxB,CAAgC,SAAS,CAAC,mBAA1C,CAA8D,WAAW,CAAC,OAA1E,EAFJ,cAGI,cAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAC,KAA5B,CAAkC,SAAS,CAAC,mBAA5C,CAAgE,WAAW,CAAC,UAA5E,EAHJ,cAII,YAAK,SAAS,CAAC,cAAf,uBACA,eAAQ,SAAS,CAAC,qBAAlB,oBADA,EAJJ,GADJ,EADH,CAYH,CAED,cAAeF,CAAAA,KAAf","sourcesContent":["import axios from 'axios';\nimport React from 'react'\n\nfunction Login(props) {\n    const handleLogin = async (e)=>{\n        try{\n        e.preventDefault();\n        let elements = e.target.elements;\n        let user ={\n            email:elements.email.value,\n            password: elements.pwd.value\n        }\n        const {data} = await axios.post(\"http://192.168.1.138:3000/api/login\", user,{headers:{\n            \"Content-Type\": \"application/json\"\n        }})\n        const todos = await axios.get(\"http://192.168.1.138:3000/api/todos\",{headers:{\n            \"Content-Type\": \"application/json\",\n            \"secret-token\": data.token\n        }})\n       props.saveToken(data.token)\n       props.setTodos(todos.data.todos)\n       props.history.push(\"/profile\")\n    }\n    catch(err){\n        throw err;\n    }\n    }\n    return (\n       <form onSubmit={handleLogin}>\n           <div className=\"col-sm-5 mx-auto py-5 px-4\">\n               <h2 className=\"text-center mb-3\">Log In</h2>\n               <input type=\"text\" name=\"email\" className=\"form-control mb-3\" placeholder=\"Email\"/>\n               <input type=\"password\" name=\"pwd\" className=\"form-control mb-3\" placeholder=\"Password\"/>\n               <div className=\"mx-auto px-4\">\n               <button className=\"btn btl-lg btn-info\">Log In</button>\n               </div>\n           </div>\n       </form> \n    )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}