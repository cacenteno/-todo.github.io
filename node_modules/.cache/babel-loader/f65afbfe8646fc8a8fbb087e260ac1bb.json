{"ast":null,"code":"import _objectSpread from\"/root/todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/root/todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/root/todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/root/todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/root/todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/root/todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/root/todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/root/todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from\"react\";import AddTodo from\"../../components/AddTodo\";import TodoList from\"../../components/TodoList\";import Timer from\"../../components/Timer\";import axios from\"axios\";var Profile=/*#__PURE__*/function(_React$Component){_inherits(Profile,_React$Component);var _super=_createSuper(Profile);function Profile(props){var _this;_classCallCheck(this,Profile);_this=_super.call(this,props);_this.removeTodo=_this.removeTodo.bind(_assertThisInitialized(_this));_this.postTodo=_this.postTodo.bind(_assertThisInitialized(_this));_this.editTodo=_this.editTodo.bind(_assertThisInitialized(_this));return _this;}_createClass(Profile,[{key:\"componentDidMount\",value:function componentDidMount(){if(!this.props.token){this.props.history.push(\"/login\");}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(!this.props.token){this.props.history.push(\"/login\");}console.log(this.props);}},{key:\"removeTodo\",value:function(){var _removeTodo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(token,todo){var _this2=this;var todoID,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;todoID={_id:todo._id};_context.next=4;return axios.delete(\"http://104.237.151.108/api/todos\",{headers:{\"Content-Type\":\"application/json\",\"secret-token\":token},data:{_id:todoID}}).then(function(data){_this2.props.setTodos(data.data.todos);});case 4:data=_context.sent;_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);throw _context.t0;case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));function removeTodo(_x,_x2){return _removeTodo.apply(this,arguments);}return removeTodo;}()},{key:\"postTodo\",value:function(){var _postTodo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(token,todo){var _this3=this;var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"http://104.237.151.108/api/todos\",todo,{headers:{\"Content-Type\":\"application/json\",\"secret-token\":token}}).then(function(data){_this3.props.setTodos(data.data.todos);});case 3:data=_context2.sent;console.log(data);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);throw _context2.t0;case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));function postTodo(_x3,_x4){return _postTodo.apply(this,arguments);}return postTodo;}()},{key:\"editTodo\",value:function(){var _editTodo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(token,todo){var data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.patch(\"http://104.237.151.108/api/todos\",todo,{headers:{\"Content-Type\":\"application/json\",\"secret-token\":token}});case 3:data=_context3.sent;_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);throw _context3.t0;case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));function editTodo(_x5,_x6){return _editTodo.apply(this,arguments);}return editTodo;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-7\",children:[/*#__PURE__*/_jsx(AddTodo,{addTodo:this.postTodo,token:this.props.token}),/*#__PURE__*/_jsx(TodoList,_objectSpread(_objectSpread({},this.props),{},{editTodo:this.editTodo,removeTodo:this.removeTodo}))]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-5\",children:/*#__PURE__*/_jsx(Timer,{})})]})});}}]);return Profile;}(React.Component);export default Profile;","map":{"version":3,"sources":["/root/todo/src/views/Profile/index.js"],"names":["React","AddTodo","TodoList","Timer","axios","Profile","props","removeTodo","bind","postTodo","editTodo","token","history","push","console","log","todo","todoID","_id","delete","headers","data","then","setTodos","todos","post","patch","Component"],"mappings":"4lCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,0BAApB,CACA,MAAOC,CAAAA,QAAP,KAAqB,2BAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,wBAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,GACMC,CAAAA,O,8GACF,iBAAYC,KAAZ,CAAmB,yCACf,uBAAMA,KAAN,EACA,MAAKC,UAAL,CAAkB,MAAKA,UAAL,CAAgBC,IAAhB,+BAAlB,CACA,MAAKC,QAAL,CAAgB,MAAKA,QAAL,CAAcD,IAAd,+BAAhB,CACA,MAAKE,QAAL,CAAgB,MAAKA,QAAL,CAAcF,IAAd,+BAAhB,CAJe,aAKlB,C,iFACkB,CACf,GAAG,CAAC,KAAKF,KAAL,CAAWK,KAAf,CAAqB,CACjB,KAAKL,KAAL,CAAWM,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB,EACH,CACJ,C,+DACmB,CAChB,GAAG,CAAC,KAAKP,KAAL,CAAWK,KAAf,CAAqB,CACjB,KAAKL,KAAL,CAAWM,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB,EACH,CACDC,OAAO,CAACC,GAAR,CAAY,KAAKT,KAAjB,EACH,C,8HACgBK,K,CAAMK,I,kKAEXC,M,CAAS,CAACC,GAAG,CAAEF,IAAI,CAACE,GAAX,C,uBACMd,CAAAA,KAAK,CAACe,MAAN,CAAa,kCAAb,CAAgD,CAACC,OAAO,CAAC,CACxE,eAAe,kBADyD,CAExE,eAAgBT,KAFwD,CAAT,CAGjEU,IAAI,CAAC,CACHH,GAAG,CAAED,MADF,CAH4D,CAAhD,EAKfK,IALe,CAKV,SAAAD,IAAI,CAAE,CACX,MAAI,CAACf,KAAL,CAAWiB,QAAX,CAAoBF,IAAI,CAACA,IAAL,CAAUG,KAA9B,EACH,CAPkB,C,QAAbH,I,6YAYCV,K,CAAOK,I,uLAECZ,CAAAA,KAAK,CAACqB,IAAN,CAAW,kCAAX,CAA+CT,IAA/C,CAAqD,CAACI,OAAO,CAAC,CAC7E,eAAe,kBAD8D,CAE7E,eAAgBT,KAF6D,CAAT,CAArD,EAGfW,IAHe,CAGV,SAAAD,IAAI,CAAE,CACX,MAAI,CAACf,KAAL,CAAWiB,QAAX,CAAoBF,IAAI,CAACA,IAAL,CAAUG,KAA9B,EACH,CALkB,C,QAAbH,I,gBAMNP,OAAO,CAACC,GAAR,CAAYM,IAAZ,E,gYAMWV,K,CAAOK,I,uKAECZ,CAAAA,KAAK,CAACsB,KAAN,CAAY,kCAAZ,CAAgDV,IAAhD,CAAqD,CAACI,OAAO,CAAC,CAC7E,eAAe,kBAD8D,CAE7E,eAAgBT,KAF6D,CAAT,CAArD,C,QAAbU,I,0TASD,CACL,mBACI,KAAC,KAAD,CAAO,QAAP,wBACI,aAAK,SAAS,CAAC,KAAf,wBACA,aAAK,SAAS,CAAC,UAAf,wBACA,KAAC,OAAD,EAAS,OAAO,CAAE,KAAKZ,QAAvB,CAAiC,KAAK,CAAE,KAAKH,KAAL,CAAWK,KAAnD,EADA,cAEA,KAAC,QAAD,gCAAc,KAAKL,KAAnB,MAA0B,QAAQ,CAAE,KAAKI,QAAzC,CAAmD,UAAU,CAAE,KAAKH,UAApE,GAFA,GADA,cAKA,YAAK,SAAS,CAAC,UAAf,uBACI,KAAC,KAAD,IADJ,EALA,GADJ,EADJ,CAaH,C,qBAxEiBP,KAAK,CAAC2B,S,EA0E5B,cAAetB,CAAAA,OAAf","sourcesContent":["import React from \"react\";\nimport AddTodo from \"../../components/AddTodo\"\nimport TodoList from \"../../components/TodoList\"\nimport Timer from \"../../components/Timer\"\nimport axios from \"axios\";\nclass Profile extends React.Component {\n    constructor(props) {\n        super(props)\n        this.removeTodo = this.removeTodo.bind(this)\n        this.postTodo = this.postTodo.bind(this)\n        this.editTodo = this.editTodo.bind(this)\n    }\n    componentDidMount(){\n        if(!this.props.token){\n            this.props.history.push(\"/login\")\n        }\n    }\n    componentDidUpdate(){\n        if(!this.props.token){\n            this.props.history.push(\"/login\")\n        }\n        console.log(this.props)\n    }\n    async removeTodo(token,todo){\n        try {\n            let todoID = {_id: todo._id}\n            const data = await axios.delete(\"http://104.237.151.108/api/todos\",{headers:{\n                \"Content-Type\":\"application/json\",\n                \"secret-token\": token\n            },data:{\n                _id: todoID\n            }}).then(data=>{\n                this.props.setTodos(data.data.todos)\n            })\n        } catch (error) {\n            throw error\n        }   \n    }\n    async postTodo(token, todo){\n        try{\n        const data = await axios.post(\"http://104.237.151.108/api/todos\", todo, {headers:{\n            \"Content-Type\":\"application/json\",\n            \"secret-token\": token\n        }}).then(data=>{\n            this.props.setTodos(data.data.todos);\n        })\n        console.log(data)\n        }\n        catch(err){\n            throw err;\n        }\n    }\n    async editTodo(token, todo){\n        try{\n        const data = await axios.patch(\"http://104.237.151.108/api/todos\", todo,{headers:{\n            \"Content-Type\":\"application/json\",\n            \"secret-token\": token\n        }})\n    }\n    catch(err){\n        throw err;\n    }\n    }\n    render() {\n        return (\n            <React.Fragment>\n                <div className=\"row\">\n                <div className=\"col-sm-7\">\n                <AddTodo addTodo={this.postTodo} token={this.props.token}/>\n                <TodoList {...this.props} editTodo={this.editTodo} removeTodo={this.removeTodo}/>\n                </div>\n                <div className=\"col-sm-5\">\n                    <Timer/>\n                </div>\n                </div>\n            </React.Fragment>\n        )\n    }\n}\nexport default Profile;"]},"metadata":{},"sourceType":"module"}